# WordStory Builder - å¾®ä¿¡å°ç¨‹åº

ä¸€æ¬¾åŸºäºAIçš„è‹±è¯­å­¦ä¹ å°ç¨‹åºï¼Œé€šè¿‡æ‹ç…§è¯†åˆ«å•è¯å¹¶ç”ŸæˆåŒ…å«ç›®æ ‡å•è¯çš„è‹±è¯­æ•…äº‹ï¼Œè®©è‹±è¯­å­¦ä¹ æ›´æœ‰è¶£ã€‚

## ğŸŒŸ åŠŸèƒ½ç‰¹æ€§

### æ ¸å¿ƒåŠŸèƒ½
- **ğŸ“· æ‹ç…§è¯†åˆ«å•è¯** - æ”¯æŒå°åˆ·ä½“å’Œæ‰‹å†™æ–‡å­—çš„OCRè¯†åˆ«
- **âœï¸ å•è¯åˆ—è¡¨ç¼–è¾‘** - æ·»åŠ ã€åˆ é™¤ã€ä¿®æ”¹è¯†åˆ«åˆ°çš„å•è¯
- **âš™ï¸ ä¸ªæ€§åŒ–è®¾ç½®** - æ ¹æ®å¹´é¾„ç»„å’Œè‹±è¯­æ°´å¹³è°ƒæ•´æ•…äº‹éš¾åº¦
- **âœ¨ AIæ•…äº‹ç”Ÿæˆ** - åŸºäºå•è¯åˆ—è¡¨å’Œéš¾åº¦è®¾ç½®ç”Ÿæˆ50-150è¯çš„è‹±è¯­æ•…äº‹
- **ğŸ¯ å•è¯é«˜äº®æ˜¾ç¤º** - æ•…äº‹ä¸­çš„ç›®æ ‡å•è¯ä¼šè¢«é«˜äº®æ ‡è®°

### å­¦ä¹ è¾…åŠ©åŠŸèƒ½
- **ğŸ“– å•è¯é‡Šä¹‰æŸ¥çœ‹** - ç‚¹å‡»é«˜äº®å•è¯æŸ¥çœ‹ä¸­æ–‡é‡Šä¹‰
- **ğŸ”Š TTSè¯­éŸ³æœ—è¯»** - æ”¯æŒæ­£å¸¸å’Œæ…¢é€Ÿæœ—è¯»æ¨¡å¼
- **ğŸ“¤ å†…å®¹å¯¼å‡ºåˆ†äº«** - å¤åˆ¶æ–‡æœ¬æˆ–ç”Ÿæˆå›¾ç‰‡åˆ†äº«
- **ğŸ”„ æ•…äº‹é‡æ–°ç”Ÿæˆ** - ä¸æ»¡æ„å¯ä»¥é‡æ–°ç”Ÿæˆæ–°çš„æ•…äº‹
- **ğŸ“š å­¦ä¹ å†å²è®°å½•** - è‡ªåŠ¨ä¿å­˜ç”Ÿæˆçš„æ•…äº‹å†å²

### ç”¨æˆ·ä½“éªŒ
- **ğŸ¨ ç°ä»£åŒ–UIè®¾è®¡** - ç¾è§‚çš„æ¸å˜è‰²å½©å’Œæµç•…çš„äº¤äº’åŠ¨ç”»
- **ğŸ“± å“åº”å¼å¸ƒå±€** - é€‚é…ä¸åŒå°ºå¯¸çš„æ‰‹æœºå±å¹•
- **ğŸš€ æ–°æ‰‹å¼•å¯¼** - é¦–æ¬¡ä½¿ç”¨æ—¶çš„åŠŸèƒ½ä»‹ç»å’Œä½¿ç”¨æŒ‡å¯¼
- **ğŸ’¾ æœ¬åœ°æ•°æ®å­˜å‚¨** - æ”¯æŒç¦»çº¿ä½¿ç”¨ï¼Œæ•°æ®æœ¬åœ°ä¿å­˜

## ğŸ›  æŠ€æœ¯æ ˆ

- **å‰ç«¯æ¡†æ¶**: React + TypeScript
- **å°ç¨‹åºæ¡†æ¶**: Taro 4.x
- **æ ·å¼é¢„å¤„ç†**: Sass/SCSS
- **çŠ¶æ€ç®¡ç†**: è‡ªå®šä¹‰Store (åŸºäºTaro Storage)
- **ç½‘ç»œè¯·æ±‚**: Taro.request å°è£…
- **å¼€å‘å·¥å…·**: ESLint + TypeScript

## ğŸ“ é¡¹ç›®ç»“æ„

```
wordstory-mini/
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ app.config.ts          # åº”ç”¨é…ç½®
â”‚   â”œâ”€â”€ app.ts                 # åº”ç”¨å…¥å£
â”‚   â”œâ”€â”€ app.scss              # å…¨å±€æ ·å¼
â”‚   â”œâ”€â”€ services/              # APIæœåŠ¡å±‚
â”‚   â”‚   â””â”€â”€ api.ts            # åç«¯æ¥å£å°è£…
â”‚   â”œâ”€â”€ store/                 # çŠ¶æ€ç®¡ç†
â”‚   â”‚   â””â”€â”€ index.ts          # å…¨å±€çŠ¶æ€å’Œæ•°æ®å­˜å‚¨
â”‚   â””â”€â”€ pages/                 # é¡µé¢ç»„ä»¶
â”‚       â”œâ”€â”€ index/             # é¦–é¡µ
â”‚       â”‚   â”œâ”€â”€ index.tsx
â”‚       â”‚   â””â”€â”€ index.scss
â”‚       â”œâ”€â”€ onboarding/        # æ–°æ‰‹å¼•å¯¼é¡µ
â”‚       â”‚   â”œâ”€â”€ index.tsx
â”‚       â”‚   â””â”€â”€ index.scss
â”‚       â”œâ”€â”€ camera/            # æ‹ç…§è¯†åˆ«é¡µ
â”‚       â”‚   â”œâ”€â”€ index.tsx
â”‚       â”‚   â””â”€â”€ index.scss
â”‚       â”œâ”€â”€ wordList/          # å•è¯åˆ—è¡¨ç¼–è¾‘é¡µ
â”‚       â”‚   â”œâ”€â”€ index.tsx
â”‚       â”‚   â””â”€â”€ index.scss
â”‚       â”œâ”€â”€ settings/          # è®¾ç½®é¡µ
â”‚       â”‚   â”œâ”€â”€ index.tsx
â”‚       â”‚   â””â”€â”€ index.scss
â”‚       â””â”€â”€ story/             # æ•…äº‹æ˜¾ç¤ºé¡µ
â”‚           â”œâ”€â”€ index.tsx
â”‚           â””â”€â”€ index.scss
â”œâ”€â”€ config/                    # æ„å»ºé…ç½®
â”œâ”€â”€ package.json
â”œâ”€â”€ tsconfig.json
â””â”€â”€ README.md
```

## ğŸš€ å¿«é€Ÿå¼€å§‹

### ç¯å¢ƒè¦æ±‚
- Node.js >= 16.0.0
- npm æˆ– pnpm

### å®‰è£…ä¾èµ–
```bash
cd wordstory-mini
npm install
# æˆ–
pnpm install
```

### å¼€å‘è°ƒè¯•
```bash
# å¾®ä¿¡å°ç¨‹åºå¼€å‘æ¨¡å¼
npm run dev:weapp

# H5å¼€å‘æ¨¡å¼
npm run dev:h5
```

### æ„å»ºå‘å¸ƒ
```bash
# æ„å»ºå¾®ä¿¡å°ç¨‹åº
npm run build:weapp

# æ„å»ºH5ç‰ˆæœ¬
npm run build:h5
```

## ğŸ”Œ åç«¯æ¥å£æ–‡æ¡£

### åŸºç¡€é…ç½®
- **å¼€å‘ç¯å¢ƒ**: `http://localhost:3000/api`
- **ç”Ÿäº§ç¯å¢ƒ**: `https://your-production-api.com/api`
- **è®¤è¯æ–¹å¼**: Bearer Token (å¯é€‰)

### 1. OCRè¯†åˆ«æ¥å£

#### POST `/api/ocr/recognize`
è¯†åˆ«å›¾ç‰‡ä¸­çš„è‹±æ–‡å•è¯

**è¯·æ±‚å‚æ•°:**
```json
{
  "image": "base64ç¼–ç çš„å›¾ç‰‡æ•°æ®"
}
```

**å“åº”æ ¼å¼:**
```json
{
  "success": true,
  "words": ["hello", "world", "story"],
  "accuracy": 0.98,
  "message": "è¯†åˆ«æˆåŠŸ"
}
```

### 2. AIæ•…äº‹ç”Ÿæˆæ¥å£

#### POST `/api/story/generate`
æ ¹æ®å•è¯åˆ—è¡¨ç”Ÿæˆè‹±è¯­æ•…äº‹

**è¯·æ±‚å‚æ•°:**
```json
{
  "words": ["hello", "world", "story"],
  "difficulty": "B1",
  "ageGroup": "teenagers"
}
```

**å“åº”æ ¼å¼:**
```json
{
  "success": true,
  "story": "Once upon a time, there was a magical world where every story came to life...",
  "wordCount": 87,
  "message": "æ•…äº‹ç”ŸæˆæˆåŠŸ"
}
```

#### POST `/api/story/regenerate`
é‡æ–°ç”Ÿæˆæ•…äº‹ï¼ˆæ’é™¤ä¹‹å‰çš„ç»“æœï¼‰

**è¯·æ±‚å‚æ•°:**
```json
{
  "words": ["hello", "world", "story"],
  "difficulty": "B1", 
  "ageGroup": "teenagers",
  "excludeIds": ["story_id_1", "story_id_2"]
}
```

### 3. å•è¯å®šä¹‰æ¥å£

#### GET `/api/word/definition`
è·å–å•è¯çš„ä¸­æ–‡é‡Šä¹‰

**è¯·æ±‚å‚æ•°:**
- `word`: è¦æŸ¥è¯¢çš„å•è¯
- `lang`: é‡Šä¹‰è¯­è¨€ (zh/en)ï¼Œé»˜è®¤zh

**å“åº”æ ¼å¼:**
```json
{
  "success": true,
  "word": "hello",
  "definition": "n. é—®å€™ï¼Œæ‹›å‘¼\nv. å‘...é—®å¥½",
  "pronunciation": "/hÉ™ËˆloÊŠ/"
}
```

### 4. TTSè¯­éŸ³æ¥å£

#### POST `/api/tts/generate`
ç”Ÿæˆæ–‡æœ¬çš„è¯­éŸ³æ–‡ä»¶

**è¯·æ±‚å‚æ•°:**
```json
{
  "text": "Once upon a time...",
  "speed": "normal"
}
```

**å“åº”æ ¼å¼:**
```json
{
  "success": true,
  "audioUrl": "https://example.com/audio/story_123.mp3",
  "duration": 45.6
}
```

### 5. ç”¨æˆ·è®¾ç½®æ¥å£

#### POST `/api/user/settings`
ä¿å­˜ç”¨æˆ·è®¾ç½®

**è¯·æ±‚å‚æ•°:**
```json
{
  "ageGroup": "teenagers",
  "difficulty": "B1",
  "language": "zh"
}
```

#### GET `/api/user/settings`
è·å–ç”¨æˆ·è®¾ç½®

**å“åº”æ ¼å¼:**
```json
{
  "success": true,
  "settings": {
    "ageGroup": "teenagers",
    "difficulty": "B1", 
    "language": "zh"
  }
}
```

### 6. å†å²è®°å½•æ¥å£

#### POST `/api/user/history`
ä¿å­˜ç”Ÿæˆå†å²

**è¯·æ±‚å‚æ•°:**
```json
{
  "words": ["hello", "world"],
  "story": "Once upon a time...",
  "difficulty": "B1",
  "ageGroup": "teenagers",
  "createdAt": "2024-01-01T00:00:00.000Z"
}
```

#### GET `/api/user/history`
è·å–å†å²è®°å½•

**è¯·æ±‚å‚æ•°:**
- `page`: é¡µç ï¼Œé»˜è®¤1
- `limit`: æ¯é¡µæ•°é‡ï¼Œé»˜è®¤10

**å“åº”æ ¼å¼:**
```json
{
  "success": true,
  "data": [
    {
      "id": "history_123",
      "words": ["hello", "world"],
      "story": "Once upon a time...",
      "difficulty": "B1",
      "ageGroup": "teenagers", 
      "createdAt": "2024-01-01T00:00:00.000Z"
    }
  ],
  "total": 25,
  "page": 1,
  "limit": 10
}
```

### 7. å¯¼å‡ºåŠŸèƒ½æ¥å£

#### POST `/api/export/image`
å¯¼å‡ºæ•…äº‹ä¸ºå›¾ç‰‡

**è¯·æ±‚å‚æ•°:**
```json
{
  "story": "Once upon a time...",
  "words": ["hello", "world"]
}
```

**å“åº”æ ¼å¼:**
```json
{
  "success": true,
  "imageUrl": "https://example.com/images/story_card_123.png"
}
```

## ğŸ“ å¼€å‘è¯´æ˜

### æ•°æ®æµç¨‹
1. **æ‹ç…§è¯†åˆ«**: ç”¨æˆ·æ‹ç…§ â†’ OCRè¯†åˆ« â†’ å•è¯åˆ—è¡¨
2. **ç¼–è¾‘å•è¯**: æ·»åŠ /åˆ é™¤/ä¿®æ”¹å•è¯ â†’ æœ¬åœ°å­˜å‚¨
3. **è®¾ç½®éš¾åº¦**: é€‰æ‹©å¹´é¾„ç»„å’Œè‹±è¯­æ°´å¹³ â†’ æœ¬åœ°å­˜å‚¨
4. **ç”Ÿæˆæ•…äº‹**: å•è¯åˆ—è¡¨ + ç”¨æˆ·è®¾ç½® â†’ AIç”Ÿæˆæ•…äº‹
5. **å­¦ä¹ åŠŸèƒ½**: é«˜äº®æ˜¾ç¤º + é‡Šä¹‰æŸ¥çœ‹ + è¯­éŸ³æœ—è¯»

### çŠ¶æ€ç®¡ç†
- ä½¿ç”¨è‡ªå®šä¹‰Storeç±»ç®¡ç†å…¨å±€çŠ¶æ€
- åŸºäºTaro.storageå®ç°æ•°æ®æŒä¹…åŒ–
- æ”¯æŒç”¨æˆ·è®¾ç½®ã€å•è¯åˆ—è¡¨ã€æ•…äº‹æ•°æ®ã€å†å²è®°å½•çš„ç®¡ç†

### é”™è¯¯å¤„ç†
- ç½‘ç»œè¯·æ±‚å¤±è´¥æ—¶æä¾›å‹å¥½çš„é”™è¯¯æç¤º
- OCRè¯†åˆ«å¤±è´¥æ—¶æä¾›é‡è¯•å’Œæ‰‹åŠ¨è¾“å…¥é€‰é¡¹
- å¼€å‘é˜¶æ®µæä¾›æ¨¡æ‹Ÿæ•°æ®ç¡®ä¿åŠŸèƒ½å¯æµ‹è¯•

### æ€§èƒ½ä¼˜åŒ–
- å›¾ç‰‡å‹ç¼©åå†è¿›è¡ŒOCRè¯†åˆ«
- ä½¿ç”¨é˜²æŠ–å¤„ç†ç”¨æˆ·è¾“å…¥
- åˆç†çš„åŠ è½½çŠ¶æ€å’Œé”™è¯¯çŠ¶æ€å±•ç¤º

## ğŸ¤ è´¡çŒ®æŒ‡å—

1. Fork æœ¬ä»“åº“
2. åˆ›å»ºç‰¹æ€§åˆ†æ”¯ (`git checkout -b feature/AmazingFeature`)
3. æäº¤æ›´æ”¹ (`git commit -m 'Add some AmazingFeature'`)
4. æ¨é€åˆ°åˆ†æ”¯ (`git push origin feature/AmazingFeature`)
5. æ‰“å¼€ Pull Request

## ğŸ“„ è®¸å¯è¯

æœ¬é¡¹ç›®é‡‡ç”¨ MIT è®¸å¯è¯ - æŸ¥çœ‹ [LICENSE](LICENSE) æ–‡ä»¶äº†è§£è¯¦æƒ…

## ğŸ“ è”ç³»æ–¹å¼

å¦‚æœ‰é—®é¢˜æˆ–å»ºè®®ï¼Œè¯·é€šè¿‡ä»¥ä¸‹æ–¹å¼è”ç³»ï¼š
- æäº¤ Issue
- å‘é€é‚®ä»¶è‡³ [your-email@example.com]

---

**WordStory Builder** - è®©è‹±è¯­å­¦ä¹ æ›´æœ‰è¶£ï¼ ğŸš€ 